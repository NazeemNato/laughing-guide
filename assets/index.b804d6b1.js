var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,c=(e,t)=>{for(var a in t||(t={}))r.call(t,a)&&n(e,a,t[a]);if(l)for(var a of l(t))s.call(t,a)&&n(e,a,t[a]);return e},o=(e,l)=>t(e,a(l));import{a as m,b as i,t as d,r as u,u as p,R as g,L as E,c as v,T as h,d as f,e as N,f as b,g as w,i as S,h as y,j as _,H as x,_ as k,D as O,k as C,F as D,l as P,m as I,n as T,o as $,p as M,q as F,s as q,v as Y,S as R,w as A}from"./vendor.042fe951.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const L=()=>m.get("refreshToken"),B=()=>m.get("accessToken"),z=(e,t)=>{const a=new Date;return m.set("accessToken",e,{expires:a.setDate(a.getDate()+3e5)}),m.set("refreshToken",t),!0},H=e=>{const t=new Date;return m.set("accessToken",e,{expires:t.setDate(t.getDate()+3e5)}),!0},J=e=>(m.set("name",e),!0),W=()=>(m.remove("accessToken"),m.remove("refreshToken"),m.remove("name"),!0),j=()=>m.get("name"),V=i.create({baseURL:"http://172.105.10.13/api",headers:{"Content-Type":"application/json"}});V.interceptors.request.use((e=>{const t=B();return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.reject(e))),V.interceptors.response.use((e=>e),(async e=>{const t=e.config;if("/user/login"!==t.url&&e.response&&401===e.response.status&&!t._retry){t._retry=!0;try{const e=await V.post("/user/refresh_token",{refreshToken:L()}),{token:a}=e.data;return console.log("idk"),H(a),V(t)}catch(a){return Promise.reject(a)}}return Promise.reject(e)}));const U=async(e,t)=>{try{const a=await V.post("/user/login",{username:e,password:t}),{full_name:l,token:r,refreshToken:s}=a.data;return z(r,s),J(l),a.data}catch(a){return d.error(a.response.data.error,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),a}},Q=()=>(W(),!0),K=async()=>{if(L()){const e=await V.post("/user/refresh_token",{refreshToken:L()}),{token:t}=e.data;H(t)}},G=()=>{const[e,t]=u.exports.useState(""),[a,l]=u.exports.useState(""),[r,s]=u.exports.useState(!1),n=p();return g.createElement("div",{className:"row main-body-portion"},g.createElement("div",{className:"col-md-4"}),g.createElement("div",{className:"col-md-4"},g.createElement("div",{className:"login-main-part"},g.createElement("div",{className:"logo"},g.createElement("img",{className:"logo-inside",src:"/images/icons/logo.png"})),g.createElement("form",{onSubmit:async t=>{t.preventDefault();try{s(!0),U(e,a).then((e=>{s(!1),n.push("/")})).catch((e=>{s(!1)}))}catch(l){s(!1),console.log(l)}}},g.createElement("div",{className:"row"},g.createElement("div",{className:"col-md-12"},g.createElement("input",{type:"name",name:"username",required:!0,value:e,className:"username",placeholder:"Enter username",onChange:e=>t(e.target.value)})),g.createElement("div",{className:"col-md-12"},g.createElement("input",{type:"password",name:"password",required:!0,className:"password",value:a,placeholder:"Enter password",onChange:e=>l(e.target.value)})),g.createElement("button",{disabled:r,className:"button login_btn"},r?g.createElement(E,{type:"Puff",color:"#8e5305",height:30,width:30}):"Sign In"))))))},X=()=>g.createElement(g.Fragment,null,g.createElement(G,null));function Z({username:e,w:t,h:a}){let l=function(e){let t=5381,a=e.length;for(;a;)t=33*t^e.charCodeAt(--a);return t>>>0}(e),r=v({h:l%360,s:.95,l:.5}),s=r.toHexString(),n=r.triad()[1].toHexString();return g.createElement("svg",{className:"avatar",width:32,height:32,viewBox:"0 0 80 80",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"},g.createElement("defs",null,g.createElement("linearGradient",{x1:"0%",y1:"0%",x2:"100%",y2:"100%",id:"g"},g.createElement("stop",{stopColor:s,offset:"0%"}),g.createElement("stop",{stopColor:n,offset:"100%"}))),g.createElement("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},g.createElement("rect",{id:"Rectangle",fill:"url(#g)",x:"0",y:"0",width:"80",height:"80"})))}const ee=()=>V.get("/stages"),te=()=>V.get("/product"),ae=()=>V.get("/dashboard"),le=()=>V.get("/device"),re=()=>V.get("/recipes"),se=e=>{let t=e||"";return V.get(`/orders?${t}`)},ne=()=>V.get("/orders/active"),ce=()=>V.get("/flow/rules"),oe=e=>V.get(`/device/detail?${e}`),me=()=>V.get("/user"),ie=(e,t)=>{const a=u.exports.useRef();u.exports.useEffect((()=>{a.current=e}),[e]),u.exports.useEffect((()=>{if(null!==t){const e=setInterval((function(){a.current()}),t);return()=>clearInterval(e)}}),[t])};function de({activeRecipe:e}){const[t,a]=u.exports.useState([]),l=p(),[r]=u.exports.useState(j()),[s,n]=u.exports.useState(0);return u.exports.useEffect((()=>{const e=setInterval((()=>n((e=>e+1))),6e3);return()=>clearTimeout(e)}),[]),e?u.exports.useEffect((()=>{a(e)}),[e]):(u.exports.useEffect((async()=>{const{data:{activeRecipes:e}}=await ne();a(e)}),[]),ie((async()=>{const{data:{activeRecipes:e}}=await ne();a(e)}),1e4)),g.createElement("div",{className:"col-md-6 text-right"},g.createElement("button",{className:"button mt-4 recipe-btn",onClick:()=>l.push("/orders")},0===t.length&&"....",1===t.length&&t[0],t.length>=2&&g.createElement(h,{text:t[s%t.length],springConfig:f.wobbly})),g.createElement("div",{className:"user-menu mt-3"},g.createElement("div",{className:"usrwrap"},g.createElement("div",{className:"profile-color"},g.createElement(Z,{username:r})),g.createElement("span",null,r)),g.createElement("div",{className:"user dropdown-content"},g.createElement("div",{className:"menu-a-row"},g.createElement(N,{to:"/users"},"Users")),g.createElement("div",{className:"menu-a-row"},g.createElement(N,{to:"/change-password"},"Change Password")),g.createElement("div",{onClick:()=>{Q(),l.push("/login")},className:"menu-a-row"},g.createElement("a",{href:"#"},"Logout")))))}const ue=({children:e,pageTitle:t})=>{const a=b();return g.createElement("div",{className:"row main-body-portion"},g.createElement("div",{className:"left-nav"},g.createElement("div",{className:"logo_part"},g.createElement(N,{to:"/"},g.createElement("img",{src:"/images/icons/logo.png",className:"logo_img"}))),g.createElement("div",{className:"menu1 first-menu "+("/"===a.pathname?"active":"")},g.createElement(N,{to:"/"},g.createElement("img",{src:"/images/icons/dash.png",className:"menu_icon"}),g.createElement("div",{className:"menu_title"},"Dashboard"))),g.createElement("div",{className:"menu1 first-menu "+("/orders"===a.pathname?"active":"")},g.createElement(N,{to:"/orders"},g.createElement("img",{src:"/images/icons/orders.png",className:"menu_icon"}),g.createElement("div",{className:"menu_title"},"Orders"))),g.createElement("div",{className:"menu1  "+("/device"===a.pathname?"active":"")},g.createElement(N,{to:"/device"},g.createElement("img",{src:"/images/icons/device.png",className:"menu_icon"}),g.createElement("div",{className:"menu_title"},"Devices"))),g.createElement("div",{className:"menu1  "+("/logs"===a.pathname?"active":"")},g.createElement(N,{to:"/logs"},g.createElement("img",{src:"/images/icons/event.png",className:"menu_icon"}),g.createElement("div",{className:"menu_title"},"Logs"))),g.createElement("div",{className:"menu1  "+("/reports"===a.pathname?"active":"")},g.createElement(N,{to:"/reports"},g.createElement("img",{src:"/images/icons/report.png",className:"menu_icon"}),g.createElement("div",{className:"menu_title"},"Reports"))),g.createElement("div",{className:"menu-last dropdown"},g.createElement("a",null,g.createElement("img",{src:"/images/icons/more.png",className:"menu_icon"}),g.createElement("div",{className:"menu_title"},"More")),g.createElement("div",{className:"dropdown-content"},g.createElement("div",{className:"menu-a-row"},g.createElement("a",{href:"#"},"General")),g.createElement("div",{className:"menu-a-row"},g.createElement("a",{href:"#"},"Services")),g.createElement("div",{className:"menu-a-row"},g.createElement("a",{href:"#"},"Help by iBA"))))),g.createElement("div",{className:"col-md-10 body-main-part"},t&&g.createElement("div",{className:"row"},g.createElement("div",{className:"col-md-6 p-0"},g.createElement("div",{className:"title_card_main"},t)),g.createElement(de,null)),e))};function pe({title:e}){return g.createElement("div",{className:"arabic_flower_main"},g.createElement("div",{className:"empty-svg"},g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"147.636",height:"132.174","data-name":"Layer 1",viewBox:"0 0 647.636 632.174"},g.createElement("path",{fill:"#f2f2f2",d:"M687.328 276.087h-174.51a15.018 15.018 0 00-15 15v387.85l-2 .61-42.81 13.11a8.007 8.007 0 01-9.99-5.31l-127.34-415.95a8.003 8.003 0 015.31-9.99l65.97-20.2 191.25-58.54 65.97-20.2a7.99 7.99 0 019.99 5.3l32.55 106.32z",transform:"translate(-276.182 -133.913)"}),g.createElement("path",{fill:"#3f3d56",d:"M725.408 274.087l-39.23-128.14a16.994 16.994 0 00-21.23-11.28l-92.75 28.39-191.24 58.55-92.75 28.4a17.015 17.015 0 00-11.28 21.23l134.08 437.93a17.027 17.027 0 0016.26 12.03 16.79 16.79 0 004.97-.75l63.58-19.46 2-.62v-2.09l-2 .61-64.17 19.65a15.015 15.015 0 01-18.73-9.95l-134.07-437.94a14.98 14.98 0 019.95-18.73l92.75-28.4 191.24-58.54 92.75-28.4a15.156 15.156 0 014.41-.66 15.015 15.015 0 0114.32 10.61l39.05 127.56.62 2h2.08z",transform:"translate(-276.182 -133.913)"}),g.createElement("path",{fill:"#c19f73",d:"M398.863 261.734a9.016 9.016 0 01-8.612-6.367l-12.88-42.072a8.999 8.999 0 015.971-11.24l175.94-53.864a9.009 9.009 0 0111.24 5.971l12.88 42.072a9.01 9.01 0 01-5.97 11.241l-175.94 53.864a8.976 8.976 0 01-2.63.395z",transform:"translate(-276.182 -133.913)"}),g.createElement("circle",{cx:"190.154",cy:"24.955",r:"20",fill:"#c19f73"}),g.createElement("circle",{cx:"190.154",cy:"24.955",r:"12.665",fill:"#fff"}),g.createElement("path",{fill:"#e6e6e6",d:"M878.818 716.087h-338a8.51 8.51 0 01-8.5-8.5v-405a8.51 8.51 0 018.5-8.5h338a8.51 8.51 0 018.5 8.5v405a8.51 8.51 0 01-8.5 8.5z",transform:"translate(-276.182 -133.913)"}),g.createElement("path",{fill:"#3f3d56",d:"M723.318 274.087h-210.5a17.024 17.024 0 00-17 17v407.8l2-.61v-407.19a15.018 15.018 0 0115-15h211.12zm183.5 0h-394a17.024 17.024 0 00-17 17v458a17.024 17.024 0 0017 17h394a17.024 17.024 0 0017-17v-458a17.024 17.024 0 00-17-17zm15 475a15.018 15.018 0 01-15 15h-394a15.018 15.018 0 01-15-15v-458a15.018 15.018 0 0115-15h394a15.018 15.018 0 0115 15z",transform:"translate(-276.182 -133.913)"}),g.createElement("path",{fill:"#c19f73",d:"M801.818 318.087h-184a9.01 9.01 0 01-9-9v-44a9.01 9.01 0 019-9h184a9.01 9.01 0 019 9v44a9.01 9.01 0 01-9 9z",transform:"translate(-276.182 -133.913)"}),g.createElement("circle",{cx:"433.636",cy:"105.174",r:"20",fill:"#c19f73"}),g.createElement("circle",{cx:"433.636",cy:"105.174",r:"12.182",fill:"#fff"}))),!e&&g.createElement("div",{className:"current_recipe"},"No Data"),e&&g.createElement("div",{className:"current_recipe"},e))}const ge=({data:e})=>g.createElement("div",{className:"col-md-6"},g.createElement("div",{className:"large-box-card arabic_flower_main"},e&&g.createElement(N,{to:"/",style:{display:"block"}},g.createElement("img",{className:"arabic_flower",src:"/images/icons/arabic_flower_img.png"}),g.createElement("div",{className:"current_recipe"},"Current Recipe"),g.createElement("div",{className:"title_for_flower"},e.recipe_name.replace("pb-",""))),!e&&g.createElement(pe,{title:"No Current Recipe"})));function Ee({open:e,close:t,children:a}){return g.createElement("div",{className:"z10",style:{display:""+(e?"":"none")}},g.createElement("div",{className:"overlay z10"},g.createElement("div",{className:"recipe-popup order p-4 z10"},g.createElement("button",{className:"button popup close",onClick:t},"X"),g.createElement("div",{className:"row mb-3"},g.createElement("div",{className:"col-md-12"},a)))))}const ve=({data:e,elements:t})=>{const[a,l]=u.exports.useState(!1),[r,s]=u.exports.useState([]),[n,c]=u.exports.useState(0);u.exports.useEffect((()=>{var a,l;if((null==e?void 0:e.length)>0){let r=(null==(a=e[0])?void 0:a.rule_id)-1||0;c(null==(l=e[0])?void 0:l.order_id),s([...t[r]])}}),[]);return g.createElement("div",{className:"col-md-12"},(null==e?void 0:e.length)>0&&g.createElement("div",{className:"large-box-card",style:{height:700}},g.createElement("div",{className:"row mb-3"},g.createElement("div",{className:"col-7"},g.createElement("div",{className:"table-title-header"},`Product Flow (Order #0000${n})`)),g.createElement("div",{className:"col-5 text-right"},e.length>=2&&g.createElement("div",{className:"select-wrapper"},g.createElement("div",{className:"select small"},g.createElement("select",{value:n,onChange:a=>{let l=e.filter((e=>{if(e.order_id==a.target.value)return e}))[0].rule_id-1||0;c(a.target.value),s([...t[l]])}},e.map((e=>g.createElement("option",{key:e.order_id,value:e.order_id},`0000${e.order_id}`))))),g.createElement("label",null,"Select Order")))),g.createElement("div",{className:"pt-3 pb-3",style:{width:"100%","overflow-x":"scroll","overflow-y":"hidden","white-space":"nowrap"}},g.createElement("div",{style:{height:590,zIndex:10,width:2250}},g.createElement(w,{elements:r,nodesDraggable:!1,nodesConnectable:!1,elementsSelectable:!1,selectNodesOnDrag:!1,panOnScroll:!0,panOnScrollMode:"free",zoomOnScroll:!1,zoomActivationKeyCode:null,zoomOnDoubleClick:!1,zoomOnPinch:!1,onElementClick:(e,t)=>{("13.0"===t.id||"13.1"===t.id||"13.2"===t.id)&&l(!0)},style:{mixWidth:"2800px"}},g.createElement(S,null),g.createElement(y,{color:"#aaa",gap:16}))),g.createElement(Ee,{open:a,close:()=>l(!a)},g.createElement("div",null,g.createElement("div",{className:"row"},g.createElement("div",{className:"row mb-3"},g.createElement("div",{className:"col-12 pt-2"},g.createElement("div",{className:"table-title-header sm mb-3"},"WRB Storage Bin"," ")),g.createElement("div",{className:"col-6"},g.createElement("label",null,"Batch ID"),g.createElement("h5",null,"BT012233")),g.createElement("div",{className:"col-6"},g.createElement("label",null,"Recipe"),g.createElement("h5",null,"Colombian"))),g.createElement("div",{className:"row mb-3"},g.createElement("div",{className:"col-6"},g.createElement("label",null,"Lot Number"),g.createElement("h5",null,"12")),g.createElement("div",{className:"col-6"},g.createElement("label",null,"Roast"),g.createElement("h5",null,"04 Oct 2021"))),g.createElement("div",{className:"row mb-4"},g.createElement("div",{className:"col-6"},g.createElement("label",null,"Temper time"),g.createElement("h5",null,"5 hrs")),g.createElement("div",{className:"col-6"},g.createElement("label",null,"Age"),g.createElement("h5",null,"3 hrs"))),g.createElement("div",{className:"row"},g.createElement("div",{className:"col-12 text-right"},g.createElement(N,{to:"/details?id=1&m="+(n%2==0?0:1),className:"button block"},"View More")))))))),0===(null==e?void 0:e.length)&&g.createElement(pe,{title:"No product flow found"}))},he=({data:e})=>g.createElement("div",{className:"col-md-6"},g.createElement("div",{className:"large-box-card"},g.createElement("div",{className:"row"},g.createElement("div",{className:"col-8"},g.createElement("div",{className:"table-title-header"},"Product Movement")),g.createElement("div",{className:"col-4 text-right"},g.createElement(N,{to:"/logs?t=1",className:"button viewall"},"View All"))),e&&g.createElement("table",{className:"table table-striped"},g.createElement("thead",null,g.createElement("tr",null,g.createElement("th",null," Device name "),g.createElement("th",null," Product "),g.createElement("th",null," Time "))),g.createElement("tbody",null,e.map((e=>g.createElement(fe,{e:e,key:e.product_movement_id})))),g.createElement("tfoot",null)),!e&&g.createElement(pe,null))),fe=({e:e})=>{const t=new Date(e.movement_datetime);return g.createElement("tr",null,g.createElement("td",null,e.devices.device_name," "),g.createElement("td",null,e.product.product_type," "),g.createElement("td",null,_.format(t,"hh:mm A")," "))},Ne=({data:e,elements:t})=>g.createElement(g.Fragment,null,g.createElement("div",{className:"row mt-4"},g.createElement(ve,{data:e.activeOrders,elements:t})),g.createElement("div",{className:"row mt-4 mb-5"},g.createElement(he,{data:e.productMovement}),g.createElement(ge,{data:e.currentProduct}))),be=({data:e})=>g.createElement("div",{className:"row three_set_block"},e&&e.map(((e,t)=>g.createElement(we,{key:e.stage_name,data:e,index:t}))),!e&&g.createElement(pe,null)),we=({data:e,index:t})=>{const a=p(),l=1==e.stage_enabled;return g.createElement("div",{className:"col-md-4"},g.createElement("div",{className:"common_block_coat green_block",onClick:()=>a.push(`/device?t=${t}`)},g.createElement("div",{className:"row"},g.createElement("div",{className:"col-md-4"},g.createElement("img",{src:`/images/icons/${e.image}.png`,alt:e.stage_name,className:"card_images"})),g.createElement("div",{className:"col-md-8"},g.createElement("h4",{className:"tile_for_block mt-2"},e.stage_name),g.createElement("div",{className:"process_status mt-2 "+(l?"active":"inactive")},g.createElement("i",null),g.createElement("span",null,l?"Active":"Inactive"))))))};function Se(){return g.createElement("div",{className:"center-loading"},g.createElement(E,{type:"Puff",color:"#dfe6e9",height:100,width:100}))}const ye=e=>{for(let t=0;t<e.length;t++)for(let a=0;a<e[t].length;a++)void 0===e[t][a].source&&void 0===e[t][a].target&&(e[t][a].data.label=g.createElement("div",{className:"box_content"},x(e[t][a].data.label)));return e};function _e(){const[e,t]=u.exports.useState(null),[a,l]=u.exports.useState(!0),[r,s]=u.exports.useState(null),[n,c]=u.exports.useState([]);return u.exports.useEffect((()=>{ae().then((e=>{t(e.data),c(ye(e.data.element)),s(e.data.activeRecipes),l(!1)})).catch((e=>{l(!1)}))}),[]),ie((async()=>{const e=await ae();t(e.data),c(ye(e.data.element)),s(e.data.activeRecipes)}),3e4),g.createElement(g.Fragment,null,e&&!a&&g.createElement("div",null,g.createElement("div",{className:"row"},g.createElement("div",{className:"col-md-6 p-0"},g.createElement("div",{className:"title_card_main"},"Dashboard")),g.createElement(de,{recipes:null==e?void 0:e.recipes,activeRecipe:r})),g.createElement(be,{data:null==e?void 0:e.stages}),g.createElement(Ne,{data:e,elements:n})),!e&&a&&g.createElement(Se,null),!e&&!a&&g.createElement("div",{className:"center-loading"},g.createElement(pe,null)))}const xe=()=>g.createElement(g.Fragment,null,g.createElement(ue,null,g.createElement(_e,null))),ke=[{status_color:"red",status_name:"Alarm"},{status_color:"gold",status_name:"Warning"},{status_color:"green",status_name:"Normal"},{status_color:"grey",status_name:"Offline"},{status_color:"orange",status_name:"Maintenance"}],Oe=({data:e})=>g.createElement("div",{className:"content active"},e&&g.createElement("div",{className:"device-set"},g.createElement("div",{className:"heading_mech"},e.stage_description),e.devices.map((e=>g.createElement(Ce,{key:e.device_id,data:e}))),0===e.devices.length&&g.createElement("div",{className:"center-loading"},g.createElement(pe,{title:"No Device Found"})," ")),!e&&g.createElement("div",{className:"center-loading"},g.createElement(pe,null))),Ce=({data:e})=>{var t,a;const l=(null==e?void 0:e.image)||"mech";return g.createElement("div",{className:"row main-mech-shadow-block"},g.createElement("div",{className:"col-md-2 image_section"},g.createElement("img",{className:"mech_img_common",src:`images/icons/${l}.png`})),g.createElement("div",{className:"col-md-10"},g.createElement("h3",{className:"title_section"},0!==e.device_status&&g.createElement("span",{title:ke[e.device_status-1].status_name,className:"device-status",style:{"background-color":ke[e.device_status-1].status_color}})," ",e.device_name),(null==(t=null==e?void 0:e.deviceunits)?void 0:t.unit_name)&&g.createElement("p",{className:"unit-title"}," ",null==(a=null==e?void 0:e.deviceunits)?void 0:a.unit_name),g.createElement("div",{className:"detail_section"},e.device_description)))},De=["Green","Roasting","Ground"],Pe=()=>{const{search:e}=b(),t=new URLSearchParams(e),[a,l]=u.exports.useState(De[t.get("t")||0]),[r,s]=u.exports.useState(null),[n,c]=u.exports.useState(!0);return u.exports.useEffect((()=>{ee().then((e=>{s(e.data),c(!1)})).catch((e=>{c(!1)}))}),[]),g.createElement(g.Fragment,null,g.createElement("nav",null,g.createElement("ul",{className:"tabs"},De.map((e=>g.createElement("li",{key:e,className:""+(e===a?"active":""),onClick:()=>l(e)},e))))),g.createElement("div",{className:"content-section"},!r&&n&&g.createElement(Se,null),r&&!n&&g.createElement(Oe,{data:r[De.indexOf(a)]}),!r&&!n&&g.createElement("div",{className:"center-loading"}," ",g.createElement(pe,null)," ")))},Ie=()=>g.createElement(ue,{pageTitle:"Devices"},g.createElement(Pe,null)),Te=e=>V.put("/user/reset-password",e),$e=e=>V.put("/orders/start",e),Me=e=>V.put("/orders/stop",e),Fe=e=>V.put(`/device/bin/toogle?m=${e}`),qe=e=>V.put(`/device/output/toogle?m=${e}`),Ye=e=>V.post("/event",e),Re=e=>V.post("/device/oee",e),Ae=e=>V.post("/production/report",e),Le=e=>V.post("/device/oc",e),Be=e=>V.post("/product_movement",e),ze=e=>V.post("/orders",e),He=e=>V.post("/user/create",e),Je=e=>V.post("/device/discharge",e);function We(){const{search:e}=b(),t=new URLSearchParams(e),[a,l]=u.exports.useState(null),[r,s]=u.exports.useState(!1),n=p(),[c,o]=u.exports.useState(!1),[m,i]=u.exports.useState(),E=e=>d.success(e,{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),v=e=>{switch(e){case"bin locked":case"output locked":return"red";case"bin unlocked":case"output unlocked":return"green";default:return"gold"}};u.exports.useEffect((()=>{let e=t.get("id")||1,a=t.get("m")||0;oe(`id=${e}&m=${a}`).then((e=>{l(e.data)})).catch(console.log)}),[]);return g.createElement(g.Fragment,null,a&&g.createElement("div",{className:"row"},g.createElement("div",{className:"col-4"},g.createElement("div",{className:"col-12"},g.createElement("img",{alt:"device image",src:"images/icons/4bin.png"})),g.createElement("div",{className:"col-12"},g.createElement("div",{className:"bin-data"},g.createElement("div",{className:"title_card_main sm  text-center"},a.name),g.createElement("div",{className:"row justify-content-center"},Object.keys(a.status).map((e=>g.createElement("span",{key:a.status[e],className:"col-4 ml-2 badge badge-primary",style:{backgroundColor:v(a.status[e].toLowerCase())}},a.status[e])))),g.createElement("div",{className:"sub-meta"},a.meta.map((e=>g.createElement("span",{key:e.label,className:"sub-detail"},e.label," - ",e.value))))))),g.createElement("div",{className:"col-8"},g.createElement("div",{className:"row"},g.createElement("div",{className:"col-12"},g.createElement("div",{className:"row silo-vals pb-4"},g.createElement("div",{className:"col-md-3 text-left pt-3"},g.createElement("p",{className:"mt-5"},"Capacity"),g.createElement("h3",{className:"mb-3 mt-1 capacity"},a.storage.capacity," lbs"),g.createElement("p",{className:"mt-3"}," Occupancy"),g.createElement("h3",{className:"mb-3 mt-1 occupancy"},a.storage.occupancy," lbs")),g.createElement("div",{className:"col-md-9 text-center"},g.createElement(k,{options:{colors:["#EDA865"],chart:{type:"radialBar",offsetY:-20,sparkline:{enabled:!0}},plotOptions:{radialBar:{startAngle:-90,endAngle:90,track:{background:"#e7e7e7",strokeWidth:"97%",margin:5,dropShadow:{enabled:!0,top:2,left:0,color:"#999",opacity:1,blur:2}},dataLabels:{name:{show:!1},value:{offsetY:-2,fontSize:"22px"}}}},grid:{padding:{top:-10}},fill:{type:"gradient",gradient:{shade:"light",shadeIntensity:.4,inverseColors:!1,opacityFrom:1,opacityTo:1,stops:[0,50,53,91]}},labels:["Average Results"],states:{hover:{filter:{type:"none"}}}},series:[a.storage.percentage],type:"radialBar",height:"500",width:"500"})))),g.createElement("div",{className:"col-12"},g.createElement("div",{className:"row"},a.buttons.map((e=>g.createElement("div",{key:e.onClick,className:"col-4 mt-5"},g.createElement("button",{className:"button",disabled:c,onClick:()=>(e=>{let a,r;switch(e){case"dis_open":s(!0);break;case"bin_lock":o(!0),Fe(t.get("m")).then((e=>{a=t.get("id")||1,r=t.get("m")||0,oe(`id=${a}&m=${r}`).then((e=>{l(e.data),o(!1)})).catch(console.log)})).catch(console.log);break;case"out_lock":o(!0),qe(t.get("m")).then((e=>{a=t.get("id")||1,r=t.get("m")||0,oe(`id=${a}&m=${r}`).then((e=>{l(e.data),o(!1)})).catch(console.log)})).catch(console.log);break;case"manual":a=1,r=1,oe(`id=${a}&m=${r}`).then((e=>{l(e.data)})),n.push({pathname:"/details",search:`?id=${a}&m=${r}`}),E("Switched to manual mode");break;case"auto":a=1,r=0,oe(`id=${a}&m=${r}`).then((e=>{l(e.data)})),n.push({pathname:"/details",search:`?id=${a}&m=${r}`}),E("Switched to auto mode");break;default:console.log("comming soon")}})(e.onClick)},e.title)))))),g.createElement(Ee,{open:r,close:()=>s(!r)},g.createElement("form",{onSubmit:e=>{e.preventDefault(),Je({amount:m}).then((({data:e})=>{E(e.message),s(!1)})).catch((e=>{d.success("Something went wrong",{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),s(!1)}))}},g.createElement("div",{className:"col-md-12"},g.createElement("input",{type:"name",name:"quantity",required:!0,type:"number",value:m,onChange:e=>i(e.target.value),className:"textinput mt-3",placeholder:"Enter discharge amount (lbs)"})),g.createElement("button",{className:"button mt-3"},"Discharge")))))),null===a&&g.createElement(Se,null))}const je=()=>g.createElement(ue,{pageTitle:"Device Details"},g.createElement(We,null));function Ve({onChange:e,data:t,label:a,devices:l,value:r}){return g.createElement(g.Fragment,null,g.createElement("div",{className:"row mb-3"},g.createElement("div",{className:"col-md-12"},g.createElement("span",{className:"select-label"}," Device "),g.createElement("div",{className:"select"},g.createElement("select",{value:r,onChange:e},l.map((e=>g.createElement("option",{key:e.device_id,value:e.device_id},e.device_name))))))),0!==a.length?g.createElement("div",{className:"row filter-row silo-vals pb-4"},g.createElement("div",{className:"col-md-3 text-right pt-3"},g.createElement("p",{className:"mt-5"},"Capacity"),g.createElement("h3",{className:"mb-3 mt-1 capacity"},a[0].capacity," Kg"),g.createElement("p",null,"Occupancy"),g.createElement("h3",{className:"mb-3 mt-1 occupancy"},a[0].occupancy," Kg")),g.createElement("div",{className:"col-md-9 text-center"},g.createElement(k,{options:{colors:["#EDA865"],chart:{type:"radialBar",offsetY:-20,sparkline:{enabled:!0}},plotOptions:{radialBar:{startAngle:-90,endAngle:90,track:{background:"#e7e7e7",strokeWidth:"97%",margin:5,dropShadow:{enabled:!0,top:2,left:0,color:"#999",opacity:1,blur:2}},dataLabels:{name:{show:!1},value:{offsetY:-2,fontSize:"22px"}}}},grid:{padding:{top:-10}},fill:{type:"gradient",gradient:{shade:"light",shadeIntensity:.4,inverseColors:!1,opacityFrom:1,opacityTo:1,stops:[0,50,53,91]}},labels:["Average Results"],states:{hover:{filter:{type:"none"}}}},series:t,type:"radialBar",height:"500",width:"500"}))):g.createElement(pe,null))}function Ue(e,t){return 100*e/t}function Qe(){const[e,t]=u.exports.useState(!1),[a,l]=u.exports.useState(null),[r,s]=u.exports.useState(null),[n,c]=u.exports.useState(null),[o,m]=u.exports.useState(null);u.exports.useEffect((()=>{(async()=>{try{t(!0);let e=[];const a=(await le()).data;m(a[0].device_id),s(a);let r={where:{device_id:{equals:a[0].device_id}}};const n=await Le(r);c(n.data),n.data.map((t=>{e.push(Ue(t.occupancy,t.capacity))})),l([...e]),t(!1)}catch(e){console.log(e),t(!1)}})()}),[]);return g.createElement("div",{className:"chart-space"},!a&&!n&&e&&g.createElement(Se,null),!a&&!n&&!e&&g.createElement(pe,null),a&&n&&!e&&g.createElement(Ve,{data:a,label:n,onChange:async e=>{m(e.target.value);let t=[],a={where:{device_id:{equals:e.target.value}}};const r=await Le(a);r.data.map((e=>{t.push(Ue(e.occupancy,e.capacity))})),l([...t]),c(r.data)},devices:r,value:o}))}const Ke=[{id:"7",text:"This Week"},{id:"30",text:"This Month"},{id:"360",text:"This Year"},{id:"custom",text:"Custom Dates"}];function Ge({device:e,data:t,onChange:a,value:l,option:r,weekValue:s,weekOnchange:n,show:c,startDate:o,endDate:m,onStart:i,onEnd:d,onCustomChange:u,stage:p,stageValue:E,stageChange:v}){var h;const f={colors:["#bb7a27","#2ecc71"],chart:{height:500,type:"line"},dataLabels:{enabled:!0},stroke:{curve:"straight"},title:{text:"Overall Equipment Effectiveness Chart",align:"left"},grid:{row:{colors:["#fff","#f2f2f2"]}},xaxis:{categories:r.oee_time},yaxes:[{display:!0,ticks:{beginAtZero:!0,steps:10,stepValue:5,max:7}}],noData:{text:"Loading...",align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:"#000000",fontSize:"14px",fontFamily:"Helvetica"}}};return g.createElement("div",null,g.createElement("div",{className:"filter-row"},g.createElement("div",{className:"row mb-5"},g.createElement("div",{className:"col-md-12"},g.createElement("span",{className:"select-label"},"Stage "),g.createElement("div",{className:"select"},g.createElement("select",{value:E,onChange:v},p.map((e=>g.createElement("option",{key:e.stage_id,value:e.stage_id},e.stage_name))))))),g.createElement("div",{className:"row mb-5"},g.createElement("div",{className:"col-md-12"},g.createElement("span",{className:"select-label"},"Device "),g.createElement("div",{className:"select"},g.createElement("select",{value:l,onChange:a},e.map((e=>g.createElement("option",{key:e.device_id,value:e.device_id},e.device_name))))))),g.createElement("div",{className:"row mb-5"},g.createElement("div",{className:"col-md-12"},g.createElement("span",{className:"select-label"},"Filter by "),g.createElement("div",{className:"select"},g.createElement("select",{value:s,onChange:n},Ke.map((e=>g.createElement("option",{key:e.id,value:e.id},e.text))))))),c&&g.createElement("form",{onSubmit:u},g.createElement("div",{className:"row mb-5 datePickerWrapper"},g.createElement("div",{className:"col-md-4"},g.createElement("span",{className:"select-label"},"From"),g.createElement(O,{selected:o,onChange:i,selectsStart:!0,startDate:o,endDate:m})),g.createElement("div",{className:"col-md-4"},g.createElement("span",{className:"select-label"},"To"),g.createElement(O,{selected:m,onChange:d,selectsEnd:!0,startDate:o,endDate:m,minDate:o})),g.createElement("div",{className:"col-md-4"},g.createElement("span",{className:"select-label"}," "),g.createElement("button",{className:"button"},g.createElement("img",{src:"/images/icons/search.png"})))))),g.createElement("div",{className:"chart-class"},0!==(null==(h=t[0].data)?void 0:h.length)?g.createElement(k,{options:f,series:t,type:"line",height:500}):g.createElement(pe,null)))}function Xe(){const[e,t]=u.exports.useState(!1),[a,l]=u.exports.useState(null),[r,s]=u.exports.useState(null),[n,c]=u.exports.useState(null),[o,m]=u.exports.useState(null),[i,d]=u.exports.useState({}),[p,E]=u.exports.useState(!1),[v,h]=u.exports.useState(null),[f,N]=u.exports.useState(null),[b,w]=u.exports.useState(null),[S,y]=u.exports.useState(C().startOf("month").toDate()),[_,x]=u.exports.useState(C().endOf("month").toDate());u.exports.useEffect((()=>{(async()=>{try{let e=[],a=[],r=[],n=C().startOf("month").toISOString(),o=C().endOf("month").toISOString();N("30"),t(!0);const u=(await le()).data,p=(await ee()).data;c([{stage_id:"all",stage_name:"All"},...p]),w("all"),h(u[0].device_id),s(u),i.devices={},i.oee_device_id={equals:u[0].device_id},i.oee_datetime={gte:n,lt:o},d(i);let g=i;(await Re({where:g})).data.map((t=>{e.push(t.oee_percentage);const l=C(t.oee_datetime).format("ddd, MMM DD YYYY");a.push(l),r.push(t.total_produced)})),l([{name:"OEE Percentage",type:"line",data:[...e]}]),m({oee_time:[...a]}),t(!1)}catch(e){t(!1)}})()}),[]);return g.createElement("div",{className:"chart-space"},!a&&!r&&e&&g.createElement(Se,null),!a&&!r&&!e&&g.createElement(pe,null),a&&r&&!e&&g.createElement(Ge,{device:r,data:a,onChange:async e=>{let t=[],a=[],r=[];h(e.target.value),i.oee_device_id={equals:e.target.value},d(i);let s=i;(await Re({where:s})).data.map((e=>{t.push(e.oee_percentage);const l=C(e.oee_datetime).format("ddd, MMM DD YYYY");a.push(l),r.push(e.total_produced)})),l([{name:"OEE Percentage",type:"line",data:[...t]}]),m({oee_time:[...a]})},value:v,option:o,weekOnchange:async e=>{let t,a,r=[],s=[],n=[];switch(console.log(e.target.value),e.target.value){case"7":t=C().startOf("week").toISOString(),a=C().endOf("week").toISOString(),E(!1),N("7");break;case"30":t=C().startOf("month").toISOString(),a=C().endOf("month").toISOString(),E(!1),N("30");break;case"360":t=C().startOf("year").toISOString(),a=C().endOf("year").toISOString(),E(!1),N("360");break;case"custom":E(!0),N("custom");break;default:console.log("opps")}if("custom"!==e.target.value){i.oee_datetime={gte:t,lt:a},d(i);let e=i;(await Re({where:e})).data.map((e=>{r.push(e.oee_percentage);const t=C(e.oee_datetime).format("ddd, MMM DD YYYY");s.push(t),n.push(e.total_produced)})),l([{name:"OEE Percentage",type:"line",data:[...r]}]),m({oee_time:[...s]})}},weekValue:f,startDate:S,endDate:_,onStart:e=>{y(e)},onEnd:e=>{x(e)},show:p,onCustomChange:async e=>{e.preventDefault();let t=[],a=[],r=[],s=C(S).toISOString(),n=C(_).toISOString();i.oee_datetime={gte:s,lt:n},d(i);let c=i;(await Re({where:c})).data.map((e=>{t.push(e.oee_percentage);const l=C(e.oee_datetime).format("ddd, MMM DD YYYY");a.push(l),r.push(e.total_produced)})),l([{name:"OEE Percentage",type:"line",data:[...t]}]),m({oee_time:[...a]})},stage:n,stageChange:async e=>{let t=[],a=[],r=[];w(e.target.value),"all"===e.target.value?(i.devices={},d(i)):(i.devices={stages:{stage_id:parseInt(e.target.value)}},d(i));let s=i;(await Re({where:s})).data.map((e=>{t.push(e.oee_percentage);const l=C(e.oee_datetime).format("ddd, MMM DD YYYY");a.push(l),r.push(e.total_produced)})),l([{name:"OEE Percentage",type:"line",data:[...t]}]),m({oee_time:[...a]})},stageValue:b}))}const Ze=[{id:"7",text:"This Week"},{id:"30",text:"This Month"},{id:"360",text:"This Year"}];function et({onChange:e,data:t,label:a,recipes:l,value:r,weekValue:s,weekOnchange:n}){const c={colors:["#2ecc71","#EDA865"],chart:{type:"bar",height:350},title:{text:"Production by Coffee Chart",align:"left"},plotOptions:{bar:{borderRadius:10,columnWidth:"50%"}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:a.datetime},grid:{row:{colors:["#fff","#f2f2f2"]}},fill:{type:"gradient",gradient:{shade:"light",type:"horizontal",shadeIntensity:.25,gradientToColors:void 0,inverseColors:!0,opacityFrom:.85,opacityTo:.85,stops:[50,0,100]}}};return g.createElement(g.Fragment,null,g.createElement("div",{className:"filter-row"},g.createElement("div",{className:"row mb-5"},g.createElement("div",{className:"col-md-12"},g.createElement("span",{className:"select-label"}," Recipe "),g.createElement("div",{className:"select"},g.createElement("select",{value:r,onChange:e},l.map((e=>g.createElement("option",{key:e.recipe_id,value:e.recipe_id},e.recipe_name))))))),g.createElement("div",{className:"row mb-5"},g.createElement("div",{className:"col-md-12"},g.createElement("span",{className:"select-label"},"Filter by "),g.createElement("div",{className:"select"},g.createElement("select",{value:s,onChange:n},Ze.map((e=>g.createElement("option",{key:e.id,value:e.id},e.text)))))))),g.createElement("div",{className:"chart-class"},g.createElement(k,{options:c,series:t,type:"bar",height:350})))}function tt(){const[e,t]=u.exports.useState(!1),[a,l]=u.exports.useState(null),[r,s]=u.exports.useState(null),[n,c]=u.exports.useState(null),[o,m]=u.exports.useState(null),[i,d]=u.exports.useState(null);u.exports.useEffect((()=>{(async()=>{try{t(!0);let e=[],a=[],r=[];const n=await re(),o=n.data;c(n.data),m(o[0].recipe_id);let i={where:{production_recipe_id:{equals:o[0].recipe_id}}};(await Ae(i)).data.map((t=>{e.push(t.production_qty),a.push(t.production_expected);const l=new Date(t.production_datetime);r.push(_.format(l,"ddd, MMM DD YYYY hh:mm A"))})),s([{name:"Production excepted",data:a},{name:"Production quantity",data:e}]),l({datetime:r}),t(!1)}catch(e){console.log(e),t(!1)}})()}),[]);return g.createElement("div",{className:"chart-space"},!r&&!a&&e&&g.createElement(Se,null),!r&&!a&&!e&&g.createElement(pe,null),r&&a&&!e&&g.createElement(et,{onChange:async e=>{m(e.target.value);let t=[],a=[],r=[],n={where:{production_recipe_id:{equals:parseInt(e.target.value)}}};(await Ae(n)).data.map((e=>{t.push(e.production_qty),a.push(e.production_expected);const l=new Date(e.production_datetime);r.push(_.format(l,"ddd, MMM DD YYYY hh:mm A"))})),s([{name:"Expected Production",data:a},{name:"Actual Production",data:t}]),l({datetime:r})},recipes:n,data:r,label:a,value:o,weekOnchange:e=>{switch(e.target.value){case"7":d("7");break;case"30":d("30");break;case"360":d("360");break;case"custom":d("custom");break;default:console.log("opps")}},weekValue:i}))}const at=["OEE Chart","Production by Coffee","Silo Capacity vs Current Occupancy"];function lt(){const e=[g.createElement(Xe,null),g.createElement(tt,null),g.createElement(Qe,null)],[t,a]=u.exports.useState(at[0]);return g.createElement(g.Fragment,null,g.createElement("nav",null,g.createElement("ul",{className:"tabs big"},at.map((e=>g.createElement("li",{key:e,className:""+(e===t?"active":""),onClick:()=>a(e)},e))))),e[at.indexOf(t)])}const rt=()=>g.createElement(g.Fragment,null,g.createElement(ue,{pageTitle:"Reports"},g.createElement(lt,null)));function st({header:e,rows:t,options:a,refresh:l}){const{items:r,requestSort:s,sortConfig:n}=((e,t=null)=>{const[a,l]=g.useState(t);return{items:g.useMemo((()=>{let t=[...e];return null!==a&&t.sort(((e,t)=>e[a.key]<t[a.key]?"ascending"===a.direction?-1:1:e[a.key]>t[a.key]?"ascending"===a.direction?1:-1:0)),t}),[e,a]),requestSort:e=>{let t="ascending";a&&a.key===e&&"ascending"===a.direction&&(t="descending"),l({key:e,direction:t})},sortConfig:a}})(t),c=e=>{if(n)return n.key===e?n.direction:void 0};return g.createElement("div",{className:"table-responsive text-nowrap"},g.createElement("table",{className:"table table-striped table-sortable"},r.length>0&&g.createElement("thead",null,e.map((e=>g.createElement("th",{key:e.label},g.createElement("div",{onClick:()=>s(e.field),className:c(e.field)},e.label))))),g.createElement("tbody",null,r.map((t=>g.createElement("tr",null,e.map((e=>g.createElement(nt,{j:e,i:t,options:a,refresh:l})))))),0===r.length&&g.createElement(pe,null))))}const nt=({i:e,j:t,options:a,refresh:l})=>{let r;const{field:s,isDate:n}=t,[c,o]=u.exports.useState(!1),[m,i]=u.exports.useState(-1),p=e=>{let t,a;switch(e){case 1:t="Processing",a="gold";break;case 2:t="Finished",a="green";break;default:t="Not Started",a="grey"}return{result:t,color:a}},v=(e,...t)=>a=>null==a||null==e?a:v(...t)(a[e]);return r="string"!=typeof s?v(...s)(e):e[s],n?g.createElement("td",null,C(r).format("MM/DD/yyyy hh:mm A")):s===(null==a?void 0:a.field)?g.createElement("td",null,0===r&&1!==r&&2!==r&&g.createElement("button",{className:"button sm",disabled:c,onClick:()=>(async e=>{i(e),o(!0);const t=await $e({order_id:e});d.success(t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),l(e),o(!1)})(null==e?void 0:e.o_id)},g.createElement("i",{class:"far fa-play text-success mr-2"}),!c&&"Start",c&&m!==(null==e?void 0:e.order_id)&&"Start",c&&m===(null==e?void 0:e.order_id)&&g.createElement(E,{type:"Puff",color:"#8e5305",height:30,width:30})),0!==r&&g.createElement("div",null,g.createElement("span",{className:"badge badge-primary",style:{backgroundColor:p(r).color}},p(r).result),1===r&&g.createElement("button",{className:"button sm ml-3",disabled:c,onClick:()=>(async e=>{i(e),o(!0);const t=await Me({order_id:e});d.success(t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),l(e),o(!1)})(null==e?void 0:e.o_id)},g.createElement("i",{class:"far fa-ban mr-2 text-danger"}),!c&&"Stop",c&&m!==(null==e?void 0:e.order_id)&&"Stop",c&&m===(null==e?void 0:e.order_id)&&g.createElement(E,{type:"Puff",color:"#8e5305",height:20,width:20})))):g.createElement("td",null,r)};function ct({status:e,onClick:t}){return g.createElement("button",{className:"ml-3 button lb",onClick:t},g.createElement("i",{class:"fal fa-filter mr-2"}),e?"Hide Filter":"Show Filter")}const ot=[{id:"7",text:"This Week"},{id:"30",text:"This Month"},{id:"360",text:"This Year"},{id:"custom",text:"Custom Dates"}],mt=[5,25,50,100],it=()=>{const[e,t]=u.exports.useState(null),[a,l]=u.exports.useState(!0),[r,s]=u.exports.useState(0),[n,c]=u.exports.useState({}),[o,m]=u.exports.useState([]),[i,d]=u.exports.useState("all"),[p,E]=u.exports.useState(null),[v,h]=u.exports.useState(!1),[f,N]=u.exports.useState(C().startOf("month").toDate()),[b,w]=u.exports.useState(C().endOf("month").toDate()),[S,y]=u.exports.useState(25),[_,x]=u.exports.useState(!1);u.exports.useEffect((()=>{le().then((e=>m([{device_id:"all",device_name:" All"},...e.data]))).catch((e=>{l(!1)}));let e=C().startOf("week").toISOString(),a=C().endOf("week").toISOString();E("7"),n.event_device_id={},n.event_time={gte:e,lt:a},c(n),Ye({where:n,limit:S}).then((e=>{t(e.data),s(e.data.totalPage),l(!1)})).catch((e=>{l(!1)}))}),[]);return g.createElement("div",{className:"event-wrapper"},(null==e?void 0:e.data)&&!a&&g.createElement("div",{className:"event-block"},g.createElement("div",{className:"filter-row mb-2"},g.createElement("div",{className:"col-md-12 text-right"},g.createElement(ct,{status:_,onClick:()=>x(!_)}))),_&&g.createElement(D,null,g.createElement("div",{className:"filter-row bg-light mb-4 p-3"},g.createElement("div",{className:"row mb-3"},g.createElement("div",{className:"col-md-12"},g.createElement("span",{className:"select-label"}," Device "),g.createElement("div",{className:"select"},g.createElement("select",{value:i,onChange:async e=>{if(d(e.target.value),"all"!==e.target.value){n.event_device_id=e.target.value,c(n),Ye({where:n,limit:S}).then((e=>{t(e.data),s(e.data.totalPage)})).catch(console.log)}else{n.event_device_id={},c(n),Ye({where:n,limit:S}).then((e=>{t(e.data),s(e.data.totalPage)})).catch(console.log)}}},o.map((e=>g.createElement("option",{key:e.device_id,value:e.device_id},e.device_name))))))),g.createElement("div",{className:"row mb-3"},g.createElement("div",{className:"col-md-12"},g.createElement("span",{className:"select-label"},"Filter by "),g.createElement("div",{className:"select"},g.createElement("select",{value:p,onChange:async e=>{let a,l;switch(e.target.value){case"7":a=C().startOf("week").toISOString(),l=C().endOf("week").toISOString(),h(!1),E("7");break;case"30":a=C().startOf("month").toISOString(),l=C().endOf("month").toISOString(),h(!1),E("30");break;case"360":a=C().startOf("year").toISOString(),l=C().endOf("year").toISOString(),h(!1),E("360");break;case"custom":h(!0),E("custom");break;default:console.log("opps")}if("custom"!==e.target.value){n.event_time={gte:a,lt:l},c(n),Ye({where:n,limit:S}).then((e=>{t(e.data),s(e.data.totalPage)})).catch(console.log)}}},ot.map((e=>g.createElement("option",{key:e.id,value:e.id},e.text))))))),v&&g.createElement("form",{onSubmit:async e=>{e.preventDefault();let a=C(f).toISOString(),l=C(b).toISOString();n.event_time={gte:a,lt:l},c(n),Ye({where:n,limit:S}).then((e=>{t(e.data),s(e.data.totalPage)})).catch(console.log)}},g.createElement("div",{className:"row mb-3 datePickerWrapper"},g.createElement("div",{className:"col-md-4"},g.createElement("span",{className:"select-label"},"From"),g.createElement(O,{selected:f,onChange:e=>{N(e)},selectsStart:!0,startDate:f,endDate:b})),g.createElement("div",{className:"col-md-4"},g.createElement("span",{className:"select-label"},"To"),g.createElement(O,{selected:b,onChange:e=>{w(e)},selectsEnd:!0,startDate:f,endDate:b,minDate:f})),g.createElement("div",{className:"col-md-4"},g.createElement("span",{className:"select-label"}," "),g.createElement("button",{className:"button"},g.createElement("img",{src:"/images/icons/search.png"}))))),g.createElement("div",{className:"row mb-3"},g.createElement("div",{className:"col-md-12"},g.createElement("span",{className:"select-label"}," Query count "),g.createElement("div",{className:"select"},g.createElement("select",{value:S,onChange:e=>{let a=parseInt(e.target.value);y(a),Ye({where:n,limit:a}).then((e=>{t(e.data),s(e.data.totalPage)})).catch(console.log)}},mt.map((e=>g.createElement("option",{key:e,value:e},e))))))),g.createElement("div",{className:"row mb-3"},g.createElement("div",{className:"col-md-12"},g.createElement("span",{className:"select-label"}," Download "),g.createElement("button",{className:"button mt-2",onClick:()=>{let t=`logs-${i}-${p}-${S}-${(new Date).getTime()}`,a=(null==e?void 0:e.data)||[];a.map((e=>{delete e.devices}));const l=I.types.csv;I({data:a,fileName:t,exportType:l})}},g.createElement("i",{className:"far fa-file-spreadsheet mr-2"}),"CSV"," "))))),g.createElement(st,{header:[{label:"Device name",field:"device_name"},{label:"Description",field:"event_description"},{label:"Time",field:"event_time",isDate:!0}],rows:null==e?void 0:e.data})),!(null==e?void 0:e.data)&&a&&g.createElement(Se,null),(null==e?void 0:e.data)&&!a&&g.createElement("div",{className:"page-nav"},g.createElement("nav",{className:"navigation"},g.createElement(P,{previousLabel:"<",nextLabel:">",breakLabel:"...",breakClassName:"page-link",pageCount:r,onPageChange:({selected:e})=>{Ye({where:n,limit:S,page:e+1}).then((e=>{t(e.data),s(e.data.totalPage)})).catch(console.log)},containerClassName:"pagination",pageClassName:"page-item",activeLinkClassName:"page-link active",nextLinkClassName:"page-link",previousClassName:"page-link",pageLinkClassName:"page-link",activeClassName:"active",disabledClassName:"page-item disabled"}))),!(null==e?void 0:e.data)&&!a&&g.createElement("div",{className:"center-loading"}," ",g.createElement(pe,{title:"No Events Found"})," "))},dt=[{id:"7",text:"This Week"},{id:"30",text:"This Month"},{id:"360",text:"This Year"},{id:"custom",text:"Custom Dates"}],ut=()=>{const[e,t]=u.exports.useState(null),[a,l]=u.exports.useState(!0),[r,s]=u.exports.useState({}),[n,c]=u.exports.useState([]),[o,m]=u.exports.useState("all"),[i,d]=u.exports.useState([]),[p,E]=u.exports.useState("all"),[v,h]=u.exports.useState(null),[f,N]=u.exports.useState(!1),[b,w]=u.exports.useState(C().startOf("month").toDate()),[S,y]=u.exports.useState(C().endOf("month").toDate()),[_,x]=u.exports.useState(!1);u.exports.useEffect((()=>{le().then((e=>c([{device_id:"all",device_name:" All"},...e.data]))).catch((e=>{l(!1)})),te().then((e=>d([{product_id:"all",product_type:" All"},...e.data]))).catch((e=>{l(!1)}));let e=C().startOf("week").toISOString(),a=C().endOf("week").toISOString();h("7"),r.product_id={},r.movement_datetime={gte:e,lt:a},s(r),Be({where:r}).then((e=>{t(e.data),l(!1)})).catch((e=>{l(!1)}))}),[]);return g.createElement("div",{className:"event-wrapper"},e&&!a&&g.createElement("div",{className:"event-block"},g.createElement("div",{className:"filter-row mb-2"},g.createElement("div",{className:"col-md-12 text-right"},g.createElement(ct,{status:_,onClick:()=>x(!_)}))),_&&g.createElement("div",{className:"filter-row bg-light mb-4 p-3"},g.createElement("div",{className:"row mb-5"},g.createElement("div",{className:"col-md-12"},g.createElement("span",{className:"select-label"}," Device "),g.createElement("div",{className:"select"},g.createElement("select",{value:o,onChange:e=>{"all"!==e.target.value?r.device_id=e.target.value:r.device_id={},s(r),Be({where:r}).then((e=>{t(e.data)})).catch((e=>{})),m(e.target.value)}},n.map((e=>g.createElement("option",{key:e.device_id,value:e.device_id},e.device_name))))))),g.createElement("div",{className:"row mb-5"},g.createElement("div",{className:"col-md-12"},g.createElement("span",{className:"select-label"}," Product "),g.createElement("div",{className:"select"},g.createElement("select",{value:p,onChange:e=>{"all"!==e.target.value?r.product_id=parseInt(e.target.value):r.product_id={},s(r),Be({where:r}).then((e=>{t(e.data)})).catch((e=>{})),E(e.target.value)}},i.map((e=>g.createElement("option",{key:e.product_id,value:e.product_id},e.product_type))))))),g.createElement("div",{className:"row mb-5"},g.createElement("div",{className:"col-md-12"},g.createElement("span",{className:"select-label"},"Filter by "),g.createElement("div",{className:"select"},g.createElement("select",{value:v,onChange:async e=>{let a,l;switch(e.target.value){case"7":a=C().startOf("week").toISOString(),l=C().endOf("week").toISOString(),N(!1),h("7");break;case"30":a=C().startOf("month").toISOString(),l=C().endOf("month").toISOString(),N(!1),h("30");break;case"360":a=C().startOf("year").toISOString(),l=C().endOf("year").toISOString(),N(!1),h("360");break;case"custom":N(!0),h("custom");break;default:console.log("opps")}if("custom"!==e.target.value){r.movement_datetime={gte:a,lt:l},s(r),Be({where:r}).then((e=>{t(e.data)})).catch(console.log)}}},dt.map((e=>g.createElement("option",{key:e.id,value:e.id},e.text))))))),f&&g.createElement("form",{onSubmit:async e=>{e.preventDefault();let a=C(b).toISOString(),l=C(S).toISOString();r.movement_datetime={gte:a,lt:l},s(r),Be({where:r}).then((e=>{t(e.data)})).catch(console.log)}},g.createElement("div",{className:"row mb-5 datePickerWrapper"},g.createElement("div",{className:"col-md-4"},g.createElement("span",{className:"select-label"},"From"),g.createElement(O,{selected:b,onChange:e=>{w(e)},selectsStart:!0,startDate:b,endDate:S})),g.createElement("div",{className:"col-md-4"},g.createElement("span",{className:"select-label"},"To"),g.createElement(O,{selected:S,onChange:e=>{y(e)},selectsEnd:!0,startDate:b,endDate:S,minDate:b})),g.createElement("div",{className:"col-md-4"},g.createElement("span",{className:"select-label"}," "),g.createElement("button",{className:"button"},g.createElement("img",{src:"/images/icons/search.png"}))))),g.createElement("div",{className:"row mb-5"},g.createElement("div",{className:"col-md-12"},g.createElement("span",{className:"select-label"}," Download "),g.createElement("button",{className:"button",onClick:()=>{const t={fieldSeparator:",",quoteStrings:'"',decimalSeparator:".",showLabels:!0,showTitle:!1,filename:`pm-${p}-${v}-${(new Date).getTime()}`,useTextFile:!1,useBom:!0,useKeysAsHeaders:!0},a=new T.ExportToCsv(t);let l=e||[];l.map((e=>{delete e.devices,delete e.product,delete e.product_movement_id,delete e.product_id})),a.generateCsv(l)}},g.createElement("i",{className:"far fa-file-spreadsheet mr-2"}),"CSV")))),g.createElement(st,{header:[{field:"product_type",label:"Product"},{field:"device_name",label:"Device name"},{field:"reported_value",label:"Reported value"},{field:"movement_datetime",label:"Time",isDate:!0}],rows:e})),!e&&a&&g.createElement(Se,null),!e&&!a&&g.createElement(g.Fragment,null,g.createElement("div",{className:"center-loading"},g.createElement(pe,{title:"No Product Movement Found"}))))},pt=["Events","Product Movement"];function gt(){const{search:e}=b(),t=new URLSearchParams(e),a=[g.createElement(it,null),g.createElement(ut,null)],[l,r]=u.exports.useState(pt[t.get("t")||0]);return g.createElement(g.Fragment,null,g.createElement("nav",null,g.createElement("ul",{className:"tabs"},pt.map((e=>g.createElement("li",{key:e,className:""+(e===l?"active":""),onClick:()=>r(e)},e))))),a[pt.indexOf(l)])}const Et=()=>g.createElement(ue,{pageTitle:"Logs"},g.createElement(gt,null));function vt({startDate:e,setStartDate:t,product:a,customerName:l,setCustomerName:r,selectedProduct:s,setSelectedProduct:n,orderQuantity:c,setOrderQuantity:o,loading:m,handleSubmit:i,formRef:d,rules:u,selectedRule:p,setSelectedRule:v}){return g.createElement("form",{ref:d,onSubmit:i},g.createElement("div",{className:"col-md-12 mb-4"},g.createElement("input",{type:"name",name:"order_customer",required:!0,value:l,onChange:e=>r(e.target.value),className:"textinput mt-3",placeholder:"Enter customer name"})),a&&g.createElement("div",{className:"select mb-3"},g.createElement("select",{value:s,required:!0,onChange:e=>{n(e.target.value)}},g.createElement("option",{value:"",disabled:!0,selected:!0,hidden:!0},"Select Product"),a.map((e=>g.createElement("option",{key:e.product_id,value:e.product_id},e.product_name))))),u&&g.createElement("div",{className:"select"},g.createElement("select",{value:p,required:!0,onChange:e=>{v(e.target.value)}},g.createElement("option",{value:"",disabled:!0,selected:!0,hidden:!0},"Select Output type"),u.map((e=>g.createElement("option",{key:e.id,value:e.id},e.rule_name))))),g.createElement("div",{className:"col-md-12 mb-4"},g.createElement("input",{type:"number",name:"order_qty",value:c,onChange:e=>o(e.target.value),required:!0,className:"textinput mt-3",placeholder:"Enter order quantity"})),g.createElement("div",{className:"col-md-12 mb-4"},g.createElement("div",{className:"datePickerWrapper"},g.createElement("div",{className:"col"},g.createElement("span",{className:"select-label"},"Fulfillment date"),g.createElement(O,{selected:e,selectsStart:!0,startDate:e,onChange:t,required:!0,showTimeSelect:!0})))),g.createElement("button",{className:"button",disabled:m},m?g.createElement(E,{type:"Puff",color:"#8e5305",height:20,width:20}):"SUBMIT"))}function ht({label:e,defaultValue:t,onChange:a,array:l,keys:r}){return g.createElement("div",{className:"row mb-2"},g.createElement("div",{className:"col-md-12"},g.createElement("span",{className:"select-label"},"Filter ",e," by "),g.createElement("div",{className:"select"},g.createElement("select",{value:t,onChange:a},l.map((e=>g.createElement("option",{key:e[r[0]],value:e[r[1]]},e[r[2]])))))))}function ft({show:e,onChange:t,startDate:a,onStart:l,endDate:r,onEnd:s}){return g.createElement(g.Fragment,null,e&&g.createElement("form",{onSubmit:t},g.createElement("div",{className:"row mb-2 datePickerWrapper"},g.createElement("div",{className:"col-md-4"},g.createElement("span",{className:"select-label"},"From"),g.createElement(O,{selected:a,onChange:l,selectsStart:!0,startDate:a,endDate:r})),g.createElement("div",{className:"col-md-4"},g.createElement("span",{className:"select-label"},"To"),g.createElement(O,{selected:r,onChange:s,selectsEnd:!0,startDate:a,endDate:r,minDate:a})),g.createElement("div",{className:"col-md-4"},g.createElement("span",{className:"select-label"}," "),g.createElement("button",{className:"button"},g.createElement("img",{src:"/images/icons/search.png"}))))))}function Nt({onSubmit:e,value:t,onChange:a}){return g.createElement("form",{onSubmit:e},g.createElement("div",{className:"row"},g.createElement("div",{className:"col-md-5 p-0"},g.createElement("input",{type:"text",name:"search_query",className:"textinput sm",placeholder:"Search order number / customer",value:t,onChange:a})),g.createElement("div",{className:"col-md-7"},g.createElement("button",{className:"button btn-search"},g.createElement("i",{class:"far fa-search"})))))}function bt({label:e,title:t,icon:a,onClick:l}){return g.createElement("div",{className:"row mb-2"},g.createElement("div",{className:"col-md-12"},g.createElement("span",{className:"select-label"}," ",e," "),g.createElement("button",{className:"button",onClick:l},g.createElement("i",{className:a}),t)))}const wt=[{id:"0",text:"All"},{id:"7",text:"This Week"},{id:"30",text:"This Month"},{id:"360",text:"This Year"},{id:"custom",text:"Custom Dates"}];function St(){const[e,t]=u.exports.useState(null),[a,l]=u.exports.useState(!0),[r,s]=u.exports.useState(!1),[n,c]=u.exports.useState(null),[o,m]=u.exports.useState(null),[i,p]=u.exports.useState(""),[E,v]=u.exports.useState(null),[h,f]=u.exports.useState(""),[N,b]=u.exports.useState(C().toDate()),[w,S]=u.exports.useState(!1),[y,_]=u.exports.useState(null),x=u.exports.useRef(),[k,O]=u.exports.useState(null),[T,M]=u.exports.useState(""),[F,q]=u.exports.useState({}),[Y,R]=u.exports.useState(""),[A,L]=u.exports.useState("0"),[B,z]=u.exports.useState(C().startOf("month").toDate()),[H,J]=u.exports.useState(C().endOf("month").toDate()),[W,j]=u.exports.useState(!1),[V,U]=u.exports.useState("0"),[Q,K]=u.exports.useState(C().startOf("month").toDate()),[G,X]=u.exports.useState(C().endOf("month").toDate()),[Z,ee]=u.exports.useState(!1);u.exports.useState(25);const[ae,le]=u.exports.useState("default"),[re,ne]=u.exports.useState(""),[oe,me]=u.exports.useState(!1);u.exports.useEffect((()=>{ce().then((e=>{m(e.data)})).catch(console.log),te().then((e=>{c(e.data)})).catch(console.log),se().then((e=>{t(e.data),l(!1)})).catch((e=>{l(!1)}))}),[]),u.exports.useEffect((()=>{ce().then((e=>{m(e.data)})).catch(console.log),te().then((e=>{c(e.data)})).catch(console.log),se(`${T}&${Y}`).then((e=>{t(e.data)})).catch(console.log)}),[k]);return g.createElement("div",{className:"event-wrapper"},g.createElement("div",{className:"event-block"},!(null==e?void 0:e.data)&&a&&g.createElement(Se,null),(null==e?void 0:e.data)&&!a&&g.createElement(g.Fragment,null,g.createElement("div",{className:"filter-row mb-2"},g.createElement("div",{className:"col-md-8"},g.createElement(Nt,{onSubmit:e=>{if(e.preventDefault(),re.length>0){const e=parseInt(re.replace(/^0+/,""));isNaN(e)?(F.order_id={},F.order_customer=re):(F.order_customer={},F.order_id=e)}else F.order_id={},F.order_customer={};q(F);let a=F;R(`where=${JSON.stringify(a)}`),se(`where=${JSON.stringify(a)}`).then((e=>{t(e.data)})).catch(console.log)},value:re,onChange:e=>{ne(e.target.value)}})),g.createElement("div",{className:"col-md-4 mb-4 text-right"},g.createElement($.exports.Tooltip,{title:"To create a new order",position:"top",trigger:"mouseenter"},g.createElement("button",{onClick:()=>s(!r),className:"button lb"},g.createElement("i",{class:"fal fa-plus-square mr-2"}),"New Order")),g.createElement(ct,{status:oe,onClick:()=>me(!oe)})),g.createElement(Ee,{open:r,close:()=>s(!r)},g.createElement("h5",{className:"mb-3"},"Add New Order"),g.createElement(vt,{product:n,startDate:N,setStartDate:e=>{b(e)},customerName:i,setCustomerName:p,selectedProduct:E,setSelectedProduct:v,orderQuantity:h,setOrderQuantity:f,loading:w,formRef:x,handleSubmit:async e=>{if(e.preventDefault(),E)try{S(!0);const e={order_product:parseInt(E),order_customer:i,order_qty:parseInt(h),order_date:C().startOf("day").toISOString(),fulfillment_date:C(N).toISOString(),rule:parseInt(y)},a=await ze(e);d.success(a.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),ce().then((e=>{m(e.data)})).catch(console.log),te().then((e=>{c(e.data)})).catch(console.log),se().then((e=>{t(e.data),l(!1)})).catch((e=>{l(!1)})),p(""),f(""),v(""),b(C().startOf("day").toDate()),S(!1),s(!r)}catch(a){S(!1)}},rules:o,selectedRule:y,setSelectedRule:_}))),oe&&g.createElement(D,null,g.createElement("div",{className:"filter-row bg-light mb-4 p-3"},g.createElement(ht,{label:"Product",defaultValue:ae,onChange:e=>{"default"===e.target.valuue?F.order_product={}:F.order_product=parseInt(e.target.value),q(F);let a=F;R(`where=${JSON.stringify(a)}`),le(e.target.value),se(`where=${JSON.stringify(a)}`).then((e=>{t(e.data)})).catch(console.log)},array:[{product_id:"default",product_name:"All"},...n],keys:["product_id","product_id","product_name"]}),g.createElement(ht,{label:"Order Date",defaultValue:V,onChange:e=>{let a,l;switch(e.target.value){case"0":ee(!1),U("0");break;case"7":a=C().startOf("week").toISOString(),l=C().endOf("week").toISOString(),ee(!1),U("7");break;case"30":a=C().startOf("month").toISOString(),l=C().endOf("month").toISOString(),ee(!1),U("30");break;case"360":a=C().startOf("year").toISOString(),l=C().endOf("year").toISOString(),ee(!1),U("360");break;case"custom":ee(!0),U("custom");break;default:console.log("opps")}if("custom"!==e.target.value&&"0"!==e.target.value){F.fulfillment_date={gte:a,lt:l},q(F);let e=F;R(`where=${JSON.stringify(e)}`),se(`where=${JSON.stringify(e)}`).then((e=>{t(e.data)})).catch(console.log)}else if("0"===e.target.value&&"custom"!==e.target.value){F.fulfillment_date={},q(F);let e=F;R(`where=${JSON.stringify(e)}`),se(`where=${JSON.stringify(e)}`).then((e=>{t(e.data)})).catch(console.log)}},array:wt,keys:["id","id","text"]}),g.createElement(ft,{show:W,onChange:e=>{e.preventDefault();let a=C(B).toISOString(),l=C(H).toISOString();F.order_date={gte:a,lt:l},q(F);let r=F;R(`where=${JSON.stringify(r)}`),se(`where=${JSON.stringify(r)}`).then((e=>{t(e.data)})).catch(console.log)},startDate:B,endDate:H,onStart:e=>z(e),onEnd:e=>J(e)}),g.createElement(ht,{label:"Fullfilment Date",defaultValue:A,onChange:e=>{let a,l;switch(e.target.value){case"0":j(!1),L("0");break;case"7":a=C().startOf("week").toISOString(),l=C().endOf("week").toISOString(),j(!1),L("7");break;case"30":a=C().startOf("month").toISOString(),l=C().endOf("month").toISOString(),j(!1),L("30");break;case"360":a=C().startOf("year").toISOString(),l=C().endOf("year").toISOString(),j(!1),L("360");break;case"custom":j(!0),L("custom");break;default:console.log("opps")}if("custom"!==e.target.value&&"0"!==e.target.value){F.order_date={gte:a,lt:l},q(F);let e=F;R(`where=${JSON.stringify(e)}`),se(`where=${JSON.stringify(e)}`).then((e=>{t(e.data)})).catch(console.log)}else if("0"===e.target.value&&"custom"!==e.target.value){F.order_date={},q(F);let e=F;R(`where=${JSON.stringify(e)}`),se(`where=${JSON.stringify(e)}`).then((e=>{t(e.data)})).catch(console.log)}},array:wt,keys:["id","id","text"]}),g.createElement(ft,{show:Z,onChange:async e=>{e.preventDefault();let a=C(Q).toISOString(),l=C(G).toISOString();F.fulfillment_date={gte:a,lt:l},q(F);let r=F;R(`where=${JSON.stringify(r)}`),se(`where=${JSON.stringify(r)}`).then((e=>{t(e.data)})).catch(console.log)},startDate:Q,endDate:G,onStart:e=>K(e),onEnd:e=>X(e)}),g.createElement(bt,{label:"Export data to",title:"CSV",icon:"far fa-file-spreadsheet mr-2",onClick:()=>{let t=`orders-${(new Date).getTime()}`,a=(null==e?void 0:e.data)||[],l=[];a.map((e=>l.push({order_id:e.order_id,order_customer:e.order_customer,product_name:e.product_name,order_qty:e.order_qty,order_date:e.order_date,fulfillment_date:e.fulfillment_date})));const r=I.types.csv;I({data:l,fileName:t,exportType:r})}}),g.createElement(bt,{label:"Reset filter",title:"Reset",icon:"far fa-redo mr-2",onClick:()=>{q({}),R(`where=${JSON.stringify({})}`),se(`where=${JSON.stringify({})}`).then((e=>{t(e.data)})).catch(console.log),le("default"),U("0"),L("0"),ne("")}}))),g.createElement(st,{refresh:O,header:[{field:"order_id",label:"#Order"},{field:"order_customer",label:"Customer"},{field:"product_name",label:"Product"},{field:"order_qty",label:"Quantity"},{field:"order_date",label:"Order Date",isDate:!0},{field:"fulfillment_date",label:"Fulfilment Date",isDate:!0},{field:"status",label:"Status"}],rows:null==e?void 0:e.data,options:{field:"status"}})),!(null==e?void 0:e.data)&&!a&&g.createElement("div",{className:"center-loading"},g.createElement(pe,{title:"No Events Found"})," ")),0!==(null==e?void 0:e.totalPage)&&!a&&g.createElement("div",{className:"page-nav"},g.createElement("nav",{className:"navigation"},g.createElement(P,{previousLabel:"<",nextLabel:">",breakLabel:"...",breakClassName:"page-link",pageCount:null==e?void 0:e.totalPage,onPageChange:({selected:e})=>{M(`page=${e+1}`),se(`page=${e+1}&${Y}`).then((e=>{t(e.data)})).catch(console.log)},containerClassName:"pagination",pageClassName:"page-item",activeLinkClassName:"page-link active",nextLinkClassName:"page-link",previousClassName:"page-link",pageLinkClassName:"page-link",activeClassName:"active",disabledClassName:"page-item disabled"}))))}const yt=()=>g.createElement(ue,{pageTitle:"Orders"},g.createElement(St,null)),_t=()=>{const[e,t]=u.exports.useState({oldPassword:"",newPassword:"",conPassword:""}),[a,l]=u.exports.useState(!1);function r(a){const{name:l,value:r}=a.target;t(o(c({},e),{[l]:r}))}return g.createElement(ue,{pageTitle:"Change Password"},g.createElement("div",{className:"row common_block_coat p-4"},g.createElement("div",{className:"col-md-4"}),g.createElement("div",{className:"col-md-4 pt-3 pb-3"},g.createElement("form",null,g.createElement("h5",{className:"mb-3"},"Change Your Password"),g.createElement("input",{autoComplete:"off",type:"password",name:"oldPassword",required:!0,className:"textinput mt-3",placeholder:"Old Password",onChange:r,value:e.oldPassword}),g.createElement("input",{autoComplete:"off",type:"password",name:"newPassword",required:!0,className:"textinput mt-3",placeholder:"New Password",onChange:r,value:e.newPassword}),e.newPassword.length>0&&e.newPassword.length<7&&g.createElement("p",{className:"text-danger  pl-3"},"Password length must be greater than 6 characters."),g.createElement("input",{autoComplete:"off",type:"password",name:"conPassword",required:!0,className:"textinput mt-3",placeholder:"Confirm Password",onChange:r,value:e.conPassword}),e.conPassword!==e.newPassword&&e.conPassword.length>0&&g.createElement("p",{className:"text-danger  pl-3"},"The Password and Confirm Password must be match."),g.createElement("button",{className:"button mt-3",type:"submit",disabled:a||e.newPassword!==e.conPassword||e.newPassword.length<7||e.oldPassword.length<7,onClick:async function(a){a.preventDefault(),l(!0);const{oldPassword:r,newPassword:s}=e;try{await Te({oldPassword:r,newPassword:s}),l(!1),t({newPassword:"",oldPassword:"",conPassword:""}),d.success("The password has been updated successfully.",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(n){l(!1);const{data:{error:e}}=n.response;d.error(e,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}}},a?g.createElement(E,{type:"Puff",color:"#8e5305",height:20,width:20}):"Submit")))))};function xt({title:e}){return g.createElement("div",{className:"arabic_flower_main"},g.createElement("div",{className:"empty-svg"},g.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"lock-svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"}))),!e&&g.createElement("div",{className:"current_recipe"},"Locked"),e&&g.createElement("div",{className:"current_recipe"},e))}function kt({formSubmit:e}){const[t,a]=u.exports.useState(""),[l,r]=u.exports.useState(""),[s,n]=u.exports.useState(""),[c,o]=u.exports.useState(!1),[m,i]=u.exports.useState(!1),d=()=>{i(!1),a(""),r(""),n(""),o(!1)};return g.createElement("form",{onSubmit:async a=>{a.preventDefault(),i(!0),await e({full_name:t,password:s,username:l,isAdmin:`${c}`},d)}},g.createElement("div",{className:"col-md-12 mb-2"},g.createElement("input",{type:"name",name:"full_name",required:!0,value:t,onChange:e=>a(e.target.value),className:"textinput mt-3",placeholder:"Enter full name"})),g.createElement("div",{className:"col-md-12 mb-2"},g.createElement("input",{type:"name",name:"username",required:!0,value:l,onChange:e=>r(e.target.value),className:"textinput mt-3",placeholder:"Enter username"})),g.createElement("div",{className:"col-md-12 mb-2"},g.createElement("input",{type:"password",name:"user_password",required:!0,value:s,onChange:e=>n(e.target.value),className:"textinput mt-3",placeholder:"Enter password"})),g.createElement("div",{className:"col-md-12 mb-4"},g.createElement("label",null,g.createElement("input",{type:"checkbox",name:"user_admin",value:c,onChange:e=>o(e.target.checked),className:"mt-3 mr-3"}),"Is admin")),g.createElement("button",{className:"button",disabled:m},m?g.createElement(E,{type:"Puff",color:"#8e5305",height:20,width:20}):"SUBMIT"))}function Ot(){const[e,t]=u.exports.useState(null),[a,l]=u.exports.useState(!0),[r,s]=u.exports.useState(null),[n,c]=u.exports.useState(!1);u.exports.useEffect((()=>{me().then((({data:e})=>{t(e),l(!1)})).catch((e=>{let t=(null==e?void 0:e.response.data.message)||"Please check your connection";s(t),l(!1)}))}),[]);return g.createElement("div",{className:"event-wrapper"},g.createElement("div",{className:"event-block"},!e&&a&&!r&&g.createElement(Se,null),!e&&!a&&r&&g.createElement(xt,{title:r}),e&&!a&&!r&&g.createElement(g.Fragment,null,g.createElement("div",{className:"filter-row"},g.createElement("div",{className:"col-md-12 mb-4 text-right"},g.createElement("button",{onClick:()=>c(!n),className:"button"},g.createElement("i",{class:"far fa-user-plus mr-2"}),"Add New User")),g.createElement(Ee,{open:n,close:()=>c(!n)},g.createElement("h5",{className:"mb-3"},"Add New User"),g.createElement(kt,{formSubmit:async(e,a)=>{He(e).then((e=>{me().then((({data:e})=>{t(e),l(!1)})).catch((e=>{let t=(null==e?void 0:e.response.data.message)||"Please check your connection";s(t),l(!1)})),d.success(e.data.message,{position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),c(!1),a()})).catch((e=>{var t;let l=(null==(t=null==e?void 0:e.response.data)?void 0:t.error)||"Client side error";d.error(l,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),c(!1),a()}))}}))),g.createElement(st,{header:[{field:"user_id",label:"Id"},{field:"full_name",label:"Full name"},{field:"username",label:"Userame"},{field:"role",label:"Role"}],rows:e}))))}const Ct=()=>g.createElement(g.Fragment,null,g.createElement(ue,{pageTitle:"Users"},g.createElement(Ot,null))),Dt=e=>{var t=e,{children:a}=t,n=((e,t)=>{var a={};for(var n in e)r.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&l)for(var n of l(e))t.indexOf(n)<0&&s.call(e,n)&&(a[n]=e[n]);return a})(t,["children"]);const m=B();return g.createElement(M,o(c({},n),{render:e=>m?g.createElement(a,c({},e)):g.createElement(F,{to:"/login"})}))};function Pt(){return g.createElement(ue,{pageTitle:"Test"},"test page")}function It(){return ie((async()=>{await K()}),12e4),g.createElement(g.Fragment,null,g.createElement(q,null),g.createElement(Y,null,g.createElement(R,null,g.createElement(Dt,{exact:!0,path:"/",children:xe}),g.createElement(Dt,{path:"/device",children:Ie}),g.createElement(Dt,{path:"/details",children:je}),g.createElement(Dt,{path:"/reports",children:rt}),g.createElement(Dt,{path:"/logs",children:Et}),g.createElement(Dt,{path:"/orders",children:yt}),g.createElement(Dt,{path:"/change-password",children:_t}),g.createElement(Dt,{path:"/test",children:Pt}),g.createElement(Dt,{path:"/users",children:Ct}),g.createElement(M,{exact:!0,path:"/login",children:g.createElement(X,null)}))))}A.render(g.createElement(g.StrictMode,null,g.createElement(It,null)),document.getElementById("root"));
